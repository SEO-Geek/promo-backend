import{s as j,r as u,l as G,c as n,b as e,i as P,j as S,e as q,k as z,d as m,g as C,w as D,f as v,v as y,t as l,n as T,F as E,p as U,m as p,o as a}from"./index-1761485338888.js";import{_ as H}from"./_plugin-vue_export-helper-1761485338888.js";const R={class:"space-y-6"},L={class:"flex items-center justify-between"},I={class:"flex items-center space-x-3"},O={class:"bg-white shadow rounded-lg p-6"},J={class:"flex justify-end"},K=["disabled"],Q={key:0,class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:1,class:"animate-spin mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},X={class:"bg-white shadow rounded-lg p-6"},Y={class:"text-lg font-medium text-gray-900 mb-4"},Z={key:0,class:"text-center py-8"},ee={key:1,class:"text-center py-8"},te={key:2,class:"space-y-4"},oe={class:"flex items-start justify-between mb-3"},se={class:"flex items-center space-x-2"},ne={class:"text-xs text-gray-500"},ae={key:0,class:"px-2 py-1 bg-pink-100 text-pink-800 rounded-full text-xs font-medium"},re={class:"flex items-center space-x-2 text-xs text-gray-500"},le={class:"px-2 py-1 bg-gray-100 rounded"},ie={class:"px-2 py-1 bg-gray-100 rounded"},de={key:0,class:"space-y-3"},ce={key:0},ue={class:"mt-1 text-xs text-gray-500"},xe={class:"mt-1 text-xs text-gray-500"},pe={class:"mt-1 text-xs text-gray-500"},ge={class:"flex space-x-2 pt-2 border-t"},me=["onClick"],ve={key:1},ye={key:0,class:"mb-3"},fe={class:"text-lg font-bold text-gray-900"},he={class:"mb-3 p-3 bg-gray-50 rounded-md"},be={class:"text-sm text-gray-900 whitespace-pre-wrap"},_e={class:"mb-3"},we={class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md"},ke={class:"flex space-x-2"},Ce=["onClick"],Te=["onClick"],Fe=["onClick"],Ve=["onClick"],$e=["onClick"],Ae={__name:"TextGenerationView",setup(Be){const f=j().params.id,c=u([]),h=u(!1),g=u(!1),x=u(null),b=u({num_variations:5}),w=async()=>{h.value=!0;try{c.value=await p.text.getTexts(f)}catch(o){console.error("Failed to fetch texts:",o)}finally{h.value=!1}},F=async()=>{g.value=!0,x.value=null;try{const o=await p.text.generateText(f,b.value);x.value={type:"success",message:`Successfully generated ${o.variations.length} text variation(s)!`},await w()}catch(o){console.error("Failed to generate text:",o),x.value={type:"error",message:o.response?.data?.detail||"Failed to generate text. Please try again."}}finally{g.value=!1}},V=async o=>{try{await p.text.approveText(o);const t=c.value.find(r=>r.id===o);t&&(t.approved=!0)}catch(t){console.error("Failed to approve text:",t),alert("Failed to approve text. Please try again.")}},$=async o=>{try{let t="";o.headline?t=`${o.headline}

${o.text_content}

CTA: ${o.cta_text}`:t=`${o.text_content}

CTA: ${o.cta_text}`,await navigator.clipboard.writeText(t),alert("Text copied to clipboard!")}catch(t){console.error("Failed to copy text:",t),alert("Failed to copy text. Please try again.")}},A=async o=>{if(confirm("Are you sure you want to delete this text variation?"))try{await p.text.deleteText(o),c.value=c.value.filter(t=>t.id!==o)}catch(t){console.error("Failed to delete text:",t),alert("Failed to delete text. Please try again.")}},_=u(null),i=u({headline:"",text_content:"",cta_text:""}),B=o=>{_.value=o.id,i.value={headline:o.headline||"",text_content:o.text_content,cta_text:o.cta_text}},k=()=>{_.value=null,i.value={headline:"",text_content:"",cta_text:""}},M=async o=>{try{const t=await p.text.updateText(o,i.value),r=c.value.find(s=>s.id===o);r&&(r.headline=t.headline,r.text_content=t.text_content,r.cta_text=t.cta_text),k()}catch(t){console.error("Failed to save edit:",t),alert("Failed to save changes. Please check character limits and try again.")}},N=async o=>{if(confirm("Regenerate this text? The current version will be replaced."))try{const t=await p.text.regenerateText(o),r=c.value.find(s=>s.id===o);r&&(r.headline=t.headline,r.text_content=t.text_content,r.cta_text=t.cta_text,r.approved=!1),alert("✨ Text regenerated successfully!")}catch(t){console.error("Failed to regenerate text:",t),alert("Failed to regenerate text. Please try again.")}};return G(()=>{w()}),(o,t)=>{const r=z("router-link");return a(),n("div",R,[e("div",L,[e("div",I,[P(r,{to:`/offers/${q(f)}`,class:"text-gray-400 hover:text-gray-600"},{default:S(()=>[...t[4]||(t[4]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["to"]),t[5]||(t[5]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Generate Text"),e("p",{class:"mt-1 text-sm text-gray-600"}," Create AI-generated promotional copy for newsletter ")],-1))])]),e("div",O,[t[10]||(t[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Text Generation Parameters",-1)),t[11]||(t[11]=e("div",{class:"mb-4 p-3 bg-blue-50 rounded-md"},[e("p",{class:"text-sm text-blue-800"},[e("strong",null,"✨ v3.5.0 Simplified:"),C(" AI now uses best-practice tone (friendly) and length (medium, 60-80 words) automatically. Based on 2025 newsletter research showing 81% reader preference for conversational tone. ")])],-1)),e("form",{onSubmit:D(F,["prevent"]),class:"space-y-4"},[e("div",null,[t[6]||(t[6]=e("label",{for:"num_variations",class:"block text-sm font-medium text-gray-700"}," Number of Variations ",-1)),v(e("input",{type:"number",id:"num_variations","onUpdate:modelValue":t[0]||(t[0]=s=>b.value.num_variations=s),min:"1",max:"60",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[y,b.value.num_variations,void 0,{number:!0}]]),t[7]||(t[7]=e("p",{class:"mt-1 text-xs text-gray-500"}," 💡 Recommended: 5-8 for regular offers, 30-60 for coffee sponsor (keeps it fresh) ",-1))]),e("div",J,[e("button",{type:"submit",disabled:g.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},[g.value?(a(),n("svg",W,[...t[9]||(t[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(a(),n("svg",Q,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])),C(" "+l(g.value?"Generating...":"Generate Text"),1)],8,K)])],32),x.value?(a(),n("div",{key:0,class:T(["mt-4 p-4 rounded-md",x.value.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"])},l(x.value.message),3)):m("",!0)]),e("div",X,[e("h3",Y,"Generated Text ("+l(c.value.length)+")",1),h.value?(a(),n("div",Z,[...t[12]||(t[12]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-600"},"Loading text variations...",-1)])])):c.value.length===0?(a(),n("div",ee,[...t[13]||(t[13]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-600"},"No text generated yet",-1),e("p",{class:"text-xs text-gray-500"},"Use the form above to generate your first variations",-1)])])):(a(),n("div",te,[(a(!0),n(E,null,U(c.value,s=>(a(),n("div",{key:s.id,class:"border border-gray-200 rounded-lg p-4 hover:border-indigo-300 transition-colors duration-200"},[e("div",oe,[e("div",se,[e("span",ne,"ID: "+l(s.id),1),e("span",{class:T(["px-2 py-1 rounded-full text-xs font-medium",s.approved?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},l(s.approved?"Approved":"Draft"),3),s.headline?m("",!0):(a(),n("span",ae," Coffee Sponsor "))]),e("div",re,[e("span",le,l(s.tone||"N/A"),1),e("span",ie,l(s.length_category||"N/A"),1),e("span",null,l(s.text_content?.split(" ").length||0)+" words",1)])]),_.value===s.id?(a(),n("div",de,[s.headline!==null?(a(),n("div",ce,[t[14]||(t[14]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Headline (optional, max 150 chars)",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>i.value.headline=d),type:"text",maxlength:"150",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Optional headline for regular offers"},null,512),[[y,i.value.headline]]),e("p",ue,l(i.value.headline?.length||0)+"/150 characters",1)])):m("",!0),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Text Content (required, max 800 chars)",-1)),v(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=d=>i.value.text_content=d),rows:"6",maxlength:"800",required:"",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[y,i.value.text_content]]),e("p",xe,l(i.value.text_content?.length||0)+"/800 characters",1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"CTA Button Text (required, max 40 chars)",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=d=>i.value.cta_text=d),type:"text",maxlength:"40",required:"",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[y,i.value.cta_text]]),e("p",pe,l(i.value.cta_text?.length||0)+"/40 characters",1)]),e("div",ge,[e("button",{onClick:d=>M(s.id),class:"px-4 py-2 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700"}," 💾 Save Changes ",8,me),e("button",{onClick:k,class:"px-4 py-2 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300"}," Cancel ")])])):(a(),n("div",ve,[s.headline?(a(),n("div",ye,[e("h4",fe,l(s.headline),1)])):m("",!0),e("div",he,[e("p",be,l(s.text_content),1)]),e("div",_e,[e("span",we,l(s.cta_text||"Learn More"),1)]),e("div",ke,[s.approved?m("",!0):(a(),n("button",{key:0,onClick:d=>V(s.id),class:"px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200"}," ✓ Approve ",8,Ce)),e("button",{onClick:d=>B(s),class:"px-3 py-1 text-xs bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200"}," ✏️ Edit ",8,Te),e("button",{onClick:d=>N(s.id),class:"px-3 py-1 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200"}," 🔄 Regenerate ",8,Fe),e("button",{onClick:d=>$(s),class:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200"}," 📋 Copy ",8,Ve),e("button",{onClick:d=>A(s.id),class:"px-3 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200"}," 🗑️ Delete ",8,$e)])]))]))),128))]))])])}}},Ge=H(Ae,[["__scopeId","data-v-bb17e0cc"]]);export{Ge as default};
