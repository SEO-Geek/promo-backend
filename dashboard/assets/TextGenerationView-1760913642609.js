import{s as V,r as u,l as F,c as n,b as e,i as A,j as M,e as N,k as $,d as p,w as S,f as y,q as h,a as j,v as B,g as G,t as a,n as _,F as z,p as P,m as g,o as r}from"./index-1760913642609.js";import{_ as D}from"./_plugin-vue_export-helper-1760913642609.js";const L={class:"space-y-6"},U={class:"flex items-center justify-between"},H={class:"flex items-center space-x-3"},I={class:"bg-white shadow rounded-lg p-6"},q={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},E={class:"flex justify-end"},R=["disabled"],W={key:0,class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J={key:1,class:"animate-spin mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},K={class:"bg-white shadow rounded-lg p-6"},O={class:"text-lg font-medium text-gray-900 mb-4"},Q={key:0,class:"text-center py-8"},X={key:1,class:"text-center py-8"},Y={key:2,class:"space-y-4"},Z={class:"flex items-start justify-between mb-3"},ee={class:"flex items-center space-x-2"},te={class:"text-xs text-gray-500"},oe={key:0,class:"px-2 py-1 bg-pink-100 text-pink-800 rounded-full text-xs font-medium"},se={class:"flex items-center space-x-2 text-xs text-gray-500"},ne={class:"px-2 py-1 bg-gray-100 rounded"},re={class:"px-2 py-1 bg-gray-100 rounded"},ae={key:0,class:"mb-3"},le={class:"text-lg font-bold text-gray-900"},ie={class:"mb-3 p-3 bg-gray-50 rounded-md"},de={class:"text-sm text-gray-900 whitespace-pre-wrap"},ce={class:"mb-3"},ue={class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md"},pe={class:"flex space-x-2"},ge=["onClick"],xe=["onClick"],me=["onClick"],ve={__name:"TextGenerationView",setup(ye){const x=V().params.id,l=u([]),m=u(!1),c=u(!1),d=u(null),i=u({tone:"professional",length_category:"medium",num_variations:20}),f=async()=>{m.value=!0;try{l.value=await g.text.getTexts(x)}catch(s){console.error("Failed to fetch texts:",s)}finally{m.value=!1}},w=async()=>{c.value=!0,d.value=null;try{const s=await g.text.generateText(x,i.value);d.value={type:"success",message:`Successfully generated ${s.variations.length} text variation(s)!`},await f()}catch(s){console.error("Failed to generate text:",s),d.value={type:"error",message:s.response?.data?.detail||"Failed to generate text. Please try again."}}finally{c.value=!1}},k=async s=>{try{await g.text.approveText(s);const t=l.value.find(v=>v.id===s);t&&(t.approved=!0)}catch(t){console.error("Failed to approve text:",t),alert("Failed to approve text. Please try again.")}},C=async s=>{try{let t="";s.headline?t=`${s.headline}

${s.text_content}

CTA: ${s.cta_text}`:t=`${s.text_content}

CTA: ${s.cta_text}`,await navigator.clipboard.writeText(t),alert("Text copied to clipboard!")}catch(t){console.error("Failed to copy text:",t),alert("Failed to copy text. Please try again.")}},T=async s=>{if(confirm("Are you sure you want to delete this text variation?"))try{await g.text.deleteText(s),l.value=l.value.filter(t=>t.id!==s)}catch(t){console.error("Failed to delete text:",t),alert("Failed to delete text. Please try again.")}};return F(()=>{f()}),(s,t)=>{const v=$("router-link");return r(),n("div",L,[e("div",U,[e("div",H,[A(v,{to:`/offers/${N(x)}`,class:"text-gray-400 hover:text-gray-600"},{default:M(()=>[...t[3]||(t[3]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["to"]),t[4]||(t[4]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Generate Text"),e("p",{class:"mt-1 text-sm text-gray-600"}," Create AI-generated promotional copy for newsletter ")],-1))])]),e("div",I,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Text Generation Parameters",-1)),t[14]||(t[14]=e("p",{class:"text-sm text-gray-600 mb-4"}," AI will generate promotional text using the offer name and description. Newsletter-optimized with headlines for regular offers. ",-1)),e("form",{onSubmit:S(w,["prevent"]),class:"space-y-4"},[e("div",q,[e("div",null,[t[6]||(t[6]=e("label",{for:"tone",class:"block text-sm font-medium text-gray-700"}," Tone ",-1)),y(e("select",{id:"tone","onUpdate:modelValue":t[0]||(t[0]=o=>i.value.tone=o),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...t[5]||(t[5]=[j('<option value="professional" data-v-eac7433c>Professional</option><option value="casual" data-v-eac7433c>Casual</option><option value="urgent" data-v-eac7433c>Urgent</option><option value="friendly" data-v-eac7433c>Friendly</option><option value="exciting" data-v-eac7433c>Exciting</option>',5)])],512),[[h,i.value.tone]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"length_category",class:"block text-sm font-medium text-gray-700"}," Length ",-1)),y(e("select",{id:"length_category","onUpdate:modelValue":t[1]||(t[1]=o=>i.value.length_category=o),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...t[7]||(t[7]=[e("option",{value:"short"},"Short (50-100 words)",-1),e("option",{value:"medium"},"Medium (100-200 words)",-1),e("option",{value:"long"},"Long (200-300 words)",-1)])],512),[[h,i.value.length_category]])])]),e("div",null,[t[9]||(t[9]=e("label",{for:"num_variations",class:"block text-sm font-medium text-gray-700"}," Number of Variations (max 30 for newsletter variety) ",-1)),y(e("input",{type:"number",id:"num_variations","onUpdate:modelValue":t[2]||(t[2]=o=>i.value.num_variations=o),min:"1",max:"30",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[B,i.value.num_variations,void 0,{number:!0}]]),t[10]||(t[10]=e("p",{class:"mt-1 text-xs text-gray-500"},"With 20 newsletters/month, 30 variations covers 1.5 months",-1))]),e("div",E,[e("button",{type:"submit",disabled:c.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},[c.value?(r(),n("svg",J,[...t[12]||(t[12]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(r(),n("svg",W,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])),G(" "+a(c.value?"Generating...":"Generate Text"),1)],8,R)])],32),d.value?(r(),n("div",{key:0,class:_(["mt-4 p-4 rounded-md",d.value.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"])},a(d.value.message),3)):p("",!0)]),e("div",K,[e("h3",O,"Generated Text ("+a(l.value.length)+")",1),m.value?(r(),n("div",Q,[...t[15]||(t[15]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-600"},"Loading text variations...",-1)])])):l.value.length===0?(r(),n("div",X,[...t[16]||(t[16]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-600"},"No text generated yet",-1),e("p",{class:"text-xs text-gray-500"},"Use the form above to generate your first variations",-1)])])):(r(),n("div",Y,[(r(!0),n(z,null,P(l.value,o=>(r(),n("div",{key:o.id,class:"border border-gray-200 rounded-lg p-4 hover:border-indigo-300 transition-colors duration-200"},[e("div",Z,[e("div",ee,[e("span",te,"ID: "+a(o.id),1),e("span",{class:_(["px-2 py-1 rounded-full text-xs font-medium",o.approved?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},a(o.approved?"Approved":"Draft"),3),o.headline?p("",!0):(r(),n("span",oe," Coffee Sponsor "))]),e("div",se,[e("span",ne,a(o.tone||"N/A"),1),e("span",re,a(o.length_category||"N/A"),1),e("span",null,a(o.text_content?.split(" ").length||0)+" words",1)])]),o.headline?(r(),n("div",ae,[e("h4",le,a(o.headline),1)])):p("",!0),e("div",ie,[e("p",de,a(o.text_content),1)]),e("div",ce,[e("span",ue,a(o.cta_text||"Learn More"),1)]),e("div",pe,[o.approved?p("",!0):(r(),n("button",{key:0,onClick:b=>k(o.id),class:"px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200"}," Approve ",8,ge)),e("button",{onClick:b=>C(o),class:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200"}," Copy Text ",8,xe),e("button",{onClick:b=>T(o.id),class:"px-3 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200"}," Delete ",8,me)])]))),128))]))])])}}},_e=D(ve,[["__scopeId","data-v-eac7433c"]]);export{_e as default};
