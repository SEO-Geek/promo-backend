import{r as u,l as _,c as r,b as e,d as C,g as x,F as V,p as M,w as O,f as d,v as p,q as c,t as n,m as v,h as N,k as j,o as l,n as b,i as B,j as D}from"./index-1760912505824.js";import{_ as U}from"./_plugin-vue_export-helper-1760912505824.js";const A={class:"space-y-6"},L={class:"flex justify-between items-center"},S={key:0,class:"text-center py-12"},$={key:1,class:"text-center py-12 bg-white rounded-lg shadow"},F={class:"mt-6"},R={key:2,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},T={class:"p-6"},q={class:"flex items-center justify-between mb-4"},z={class:"text-xs text-gray-500"},P={class:"text-lg font-medium text-gray-900 mb-2"},H={class:"text-sm text-gray-600 mb-4 line-clamp-2"},I={class:"space-y-2 mb-4"},E={class:"flex items-center text-xs text-gray-500"},G={class:"flex items-center text-xs text-gray-500"},J={class:"truncate"},K={class:"flex space-x-2"},Q={key:3,class:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},W={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},X={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},Y={class:"space-y-4"},Z={class:"mt-5 sm:mt-6 sm:flex sm:flex-row-reverse space-x-reverse space-x-3"},ee=["disabled"],te={__name:"OffersView",setup(oe){const y=N(),f=u([]),g=u(!1),a=u(!1),m=u(!1),s=u({name:"",description:"",destination_url:"",affiliate_slug:"",offer_type:"affiliate",status:"draft"}),w=async()=>{g.value=!0;try{f.value=await v.offers.getOffers()}catch(i){console.error("Failed to fetch offers:",i)}finally{g.value=!1}},k=async()=>{m.value=!0;try{const i=await v.offers.createOffer(s.value);f.value.unshift(i),a.value=!1,s.value={name:"",description:"",destination_url:"",affiliate_slug:"",offer_type:"affiliate",status:"draft"},y.push(`/offers/${i.id}`)}catch(i){console.error("Failed to create offer:",i),alert("Failed to create offer. Please try again.")}finally{m.value=!1}};return _(()=>{w()}),(i,t)=>{const h=j("router-link");return l(),r("div",A,[e("div",L,[t[11]||(t[11]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Offers"),e("p",{class:"mt-1 text-sm text-gray-600"}," Manage your promotional offers and campaigns ")],-1)),e("button",{onClick:t[0]||(t[0]=o=>a.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},[...t[10]||(t[10]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" New Offer ",-1)])])]),g.value?(l(),r("div",S,[...t[12]||(t[12]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-600"},"Loading offers...",-1)])])):f.value.length===0?(l(),r("div",$,[t[14]||(t[14]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),t[15]||(t[15]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No offers yet",-1)),t[16]||(t[16]=e("p",{class:"mt-1 text-sm text-gray-500"}," Get started by creating your first promotional offer. ",-1)),e("div",F,[e("button",{onClick:t[1]||(t[1]=o=>a.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"},[...t[13]||(t[13]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" New Offer ",-1)])])])])):(l(),r("div",R,[(l(!0),r(V,null,M(f.value,o=>(l(),r("div",{key:o.id,class:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow duration-200"},[e("div",T,[e("div",q,[e("span",{class:b(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},n(o.status),3),e("span",z,"ID: "+n(o.id),1)]),e("h3",P,n(o.name),1),e("p",H,n(o.description||"No description"),1),e("div",I,[e("div",E,[t[17]||(t[17]=e("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),e("span",{class:b(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",{"bg-purple-100 text-purple-800":o.offer_type==="review","bg-blue-100 text-blue-800":o.offer_type==="affiliate","bg-pink-100 text-pink-800":o.offer_type==="donation"}])},n(o.offer_type||"affiliate"),3)]),e("div",G,[t[18]||(t[18]=e("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),e("span",J,n(o.affiliate_slug||"No slug"),1)])]),e("div",K,[B(h,{to:`/offers/${o.id}`,class:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:D(()=>[...t[19]||(t[19]=[x(" View Details ",-1)])]),_:1},8,["to"])])])]))),128))])),a.value?(l(),r("div",Q,[e("div",W,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[2]||(t[2]=o=>a.value=!1)}),e("div",X,[e("div",null,[t[30]||(t[30]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Create New Offer ",-1)),e("form",{onSubmit:O(k,["prevent"])},[e("div",Y,[e("div",null,[t[20]||(t[20]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Name * ",-1)),d(e("input",{id:"name","onUpdate:modelValue":t[3]||(t[3]=o=>s.value.name=o),type:"text",required:"",placeholder:"e.g., No Code MBA",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[p,s.value.name]])]),e("div",null,[t[21]||(t[21]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),d(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=o=>s.value.description=o),rows:"3",placeholder:"Brief description of the offer...",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[p,s.value.description]])]),e("div",null,[t[22]||(t[22]=e("label",{for:"destination_url",class:"block text-sm font-medium text-gray-700"}," Destination URL * ",-1)),d(e("input",{id:"destination_url","onUpdate:modelValue":t[5]||(t[5]=o=>s.value.destination_url=o),type:"url",required:"",placeholder:"https://example.com",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[p,s.value.destination_url]]),t[23]||(t[23]=e("p",{class:"mt-1 text-xs text-gray-500"},"The URL where users will be directed",-1))]),e("div",null,[t[24]||(t[24]=e("label",{for:"affiliate_slug",class:"block text-sm font-medium text-gray-700"}," Affiliate Slug ",-1)),d(e("input",{id:"affiliate_slug","onUpdate:modelValue":t[6]||(t[6]=o=>s.value.affiliate_slug=o),type:"text",placeholder:"e.g., nocodemba",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[p,s.value.affiliate_slug]]),t[25]||(t[25]=e("p",{class:"mt-1 text-xs text-gray-500"},"Optional: Link slug (e.g., aidailypost.com/nocodemba)",-1))]),e("div",null,[t[27]||(t[27]=e("label",{for:"offer_type",class:"block text-sm font-medium text-gray-700"}," Offer Type * ",-1)),d(e("select",{id:"offer_type","onUpdate:modelValue":t[7]||(t[7]=o=>s.value.offer_type=o),required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...t[26]||(t[26]=[e("option",{value:"affiliate"},"Affiliate - Partner product promotion",-1),e("option",{value:"review"},"Review - Reviewed product/service",-1),e("option",{value:"donation"},"Donation - Support our work",-1)])],512),[[c,s.value.offer_type]])]),e("div",null,[t[29]||(t[29]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700"}," Status ",-1)),d(e("select",{id:"status","onUpdate:modelValue":t[8]||(t[8]=o=>s.value.status=o),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...t[28]||(t[28]=[e("option",{value:"draft"},"Draft - Not yet ready",-1),e("option",{value:"active"},"Active - Live and running",-1),e("option",{value:"paused"},"Paused - Temporarily disabled",-1)])],512),[[c,s.value.status]])])]),e("div",Z,[e("button",{type:"submit",disabled:m.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-auto sm:text-sm disabled:opacity-50"},n(m.value?"Creating...":"Create Offer"),9,ee),e("button",{type:"button",onClick:t[9]||(t[9]=o=>a.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])])):C("",!0)])}}},re=U(te,[["__scopeId","data-v-1e019c02"]]);export{re as default};
