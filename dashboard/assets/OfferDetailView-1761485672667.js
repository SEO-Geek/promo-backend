import{r as n,l as M,c as m,b as e,i as g,j as p,k as D,t as l,n as A,g as c,w as B,f as a,v as x,q as k,m as v,s as L,h as U,o as y}from"./index-1761485672667.js";const j={class:"space-y-6"},F={key:0,class:"text-center py-12"},S={key:1},q={class:"flex justify-between items-start"},I={class:"flex-1"},N={class:"flex items-center space-x-3"},P={class:"text-2xl font-bold text-gray-900"},R={class:"mt-1 text-sm text-gray-600"},z={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},G={class:"lg:col-span-2 space-y-6"},E={class:"bg-white shadow rounded-lg p-6"},$={class:"grid grid-cols-2 gap-4"},H={class:"flex justify-end"},Q=["disabled"],J={class:"bg-white shadow rounded-lg p-6"},K={class:"space-y-4"},W={class:"text-sm font-medium text-gray-700 mb-2"},X={class:"space-y-6"},Y={class:"bg-white shadow rounded-lg p-6"},Z={class:"space-y-3"},ee={class:"bg-white shadow rounded-lg p-6"},te={class:"space-y-2 text-sm"},oe={class:"text-gray-900"},se={class:"text-gray-900"},ie={key:2,class:"text-center py-12"},ae={__name:"OfferDetailView",setup(re){const d=L(),_=U(),o=n(null),b=n(!1),u=n(!1),w=n(0),s=n({name:"",description:"",destination_url:"",affiliate_slug:"",offer_type:"affiliate",status:"draft"}),V=async()=>{b.value=!0;try{o.value=await v.offers.getOffer(d.params.id),s.value={name:o.value.name,description:o.value.description||"",destination_url:o.value.destination_url||"",affiliate_slug:o.value.affiliate_slug||"",offer_type:o.value.offer_type||"affiliate",status:o.value.status||"draft"},await C()}catch(i){console.error("Failed to fetch offer:",i)}finally{b.value=!1}},O=async()=>{u.value=!0;try{o.value=await v.offers.updateOffer(d.params.id,s.value),alert("Offer updated successfully!")}catch(i){console.error("Failed to update offer:",i),alert("Failed to update offer. Please try again.")}finally{u.value=!1}},T=async()=>{if(confirm("Are you sure you want to delete this offer? This action cannot be undone."))try{await v.offers.deleteOffer(d.params.id),_.push("/offers")}catch(i){console.error("Failed to delete offer:",i),alert("Failed to delete offer. Please try again.")}},C=async()=>{try{const i=await v.text.getTexts(d.params.id);w.value=i.length}catch(i){console.error("Failed to fetch text count:",i)}},h=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return M(()=>{V()}),(i,t)=>{const f=D("router-link");return y(),m("div",j,[b.value?(y(),m("div",F,[...t[6]||(t[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-600"},"Loading offer...",-1)])])):o.value?(y(),m("div",S,[e("div",q,[e("div",I,[e("div",N,[g(f,{to:"/offers",class:"text-gray-400 hover:text-gray-600"},{default:p(()=>[...t[7]||(t[7]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),e("h2",P,l(o.value.name),1),e("span",{class:A(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.value.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},l(o.value.status),3)]),e("p",R,"Offer ID: "+l(o.value.id),1)]),e("button",{onClick:T,class:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[...t[8]||(t[8]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),c(" Delete Offer ",-1)])])]),e("div",z,[e("div",G,[e("div",E,[t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Basic Information",-1)),e("form",{onSubmit:B(O,["prevent"]),class:"space-y-4"},[e("div",null,[t[9]||(t[9]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Name * ",-1)),a(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=r=>s.value.name=r),type:"text",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[x,s.value.name]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Offer Description (for AI Text Generation) * ",-1)),a(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=r=>s.value.description=r),rows:"8",required:"",placeholder:"Example: Learn to build profitable businesses without coding. This comprehensive course teaches no-code tools, business strategies, and how to launch MVPs in weeks. Perfect for entrepreneurs and side-hustlers who want to validate ideas fast.",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[x,s.value.description]]),t[11]||(t[11]=e("p",{class:"mt-1 text-sm text-gray-500"}," ðŸ’¡ This description is used by the AI to generate promotional text. Be specific about the offer's value, target audience, and key benefits. The better the description, the better the AI-generated variations! ",-1))]),e("div",null,[t[12]||(t[12]=e("label",{for:"destination_url",class:"block text-sm font-medium text-gray-700"}," Destination URL * ",-1)),a(e("input",{id:"destination_url","onUpdate:modelValue":t[2]||(t[2]=r=>s.value.destination_url=r),type:"url",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[x,s.value.destination_url]]),t[13]||(t[13]=e("p",{class:"mt-1 text-xs text-gray-500"},"The URL where users will be directed",-1))]),e("div",null,[t[14]||(t[14]=e("label",{for:"affiliate_slug",class:"block text-sm font-medium text-gray-700"}," Affiliate Slug ",-1)),a(e("input",{id:"affiliate_slug","onUpdate:modelValue":t[3]||(t[3]=r=>s.value.affiliate_slug=r),type:"text",placeholder:"e.g., nocodemba",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[x,s.value.affiliate_slug]]),t[15]||(t[15]=e("p",{class:"mt-1 text-xs text-gray-500"},"Optional: Link slug (e.g., aidailypost.com/nocodemba)",-1))]),e("div",$,[e("div",null,[t[17]||(t[17]=e("label",{for:"offer_type",class:"block text-sm font-medium text-gray-700"}," Offer Type * ",-1)),a(e("select",{id:"offer_type","onUpdate:modelValue":t[4]||(t[4]=r=>s.value.offer_type=r),required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...t[16]||(t[16]=[e("option",{value:"affiliate"},"Affiliate",-1),e("option",{value:"review"},"Review",-1),e("option",{value:"donation"},"Donation",-1)])],512),[[k,s.value.offer_type]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700"}," Status * ",-1)),a(e("select",{id:"status","onUpdate:modelValue":t[5]||(t[5]=r=>s.value.status=r),required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...t[18]||(t[18]=[e("option",{value:"draft"},"Draft",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"paused"},"Paused",-1)])],512),[[k,s.value.status]])])]),e("div",H,[e("button",{type:"submit",disabled:u.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},l(u.value?"Saving...":"Save Changes"),9,Q)])],32)]),e("div",J,[t[23]||(t[23]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Content Management",-1)),e("div",K,[e("div",null,[e("h4",W,"Generated Text Variations ("+l(w.value)+")",1),t[22]||(t[22]=e("p",{class:"text-sm text-gray-600 mb-2"},"AI-generated promotional copy for newsletter campaigns",-1)),g(f,{to:`/offers/${o.value.id}/generate-text`,class:"inline-flex items-center text-sm text-indigo-600 hover:text-indigo-700 font-medium"},{default:p(()=>[...t[21]||(t[21]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),c(" Manage Text Variations â†’ ",-1)])]),_:1},8,["to"])])])])]),e("div",X,[e("div",Y,[t[25]||(t[25]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Quick Actions",-1)),e("div",Z,[g(f,{to:`/offers/${o.value.id}/generate-text`,class:"flex items-center justify-center w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg text-sm font-semibold hover:from-purple-700 hover:to-indigo-700 shadow-md hover:shadow-lg transition-all duration-200"},{default:p(()=>[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),c(" Generate Text Variations ",-1)])]),_:1},8,["to"])])]),e("div",ee,[t[28]||(t[28]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Metadata",-1)),e("dl",te,[e("div",null,[t[26]||(t[26]=e("dt",{class:"text-gray-500"},"Created",-1)),e("dd",oe,l(h(o.value.created_at)),1)]),e("div",null,[t[27]||(t[27]=e("dt",{class:"text-gray-500"},"Last Updated",-1)),e("dd",se,l(h(o.value.updated_at)),1)])])])])])])):(y(),m("div",ie,[t[30]||(t[30]=e("p",{class:"text-red-600"},"Failed to load offer",-1)),g(f,{to:"/offers",class:"mt-4 inline-block text-indigo-600 hover:text-indigo-700"},{default:p(()=>[...t[29]||(t[29]=[c(" Back to Offers ",-1)])]),_:1})]))])}}};export{ae as default};
